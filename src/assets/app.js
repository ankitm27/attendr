require=function t(e,i,a){function s(n,r){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!r&&h)return h(n,!0);if(o)return o(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return s(i?i:t)},c,c.exports,t,e,i,a)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}({1:[function(t,e,i){window.app=function(){window.skel=t("skel"),window.$=window.jQuery=t("jquery"),window.md5=t("md5"),t("jquery.touch"),t("web");var e=(t("form"),t("tabs"),{buildTimestamp:1502672259358,languages:{ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",nb:"Bokmål, Norwegian",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Chichewa",zh:"Chinese",cu:"Church Slavic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fulah",gd:"Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",el:"Greek",gn:"Guarani",gu:"Gujarati",ht:"Haitian",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua",ie:"Interlingue",iu:"Inuktitut",ik:"Inupiaq",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",ki:"Kikuyu",rw:"Kinyarwanda",ky:"Kirghiz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kuanyama",ku:"Kurdish",lo:"Lao",la:"Latin",lv:"Latvian",li:"Limburgan",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo",nd:"Ndebele, North",nr:"Ndebele, South",ng:"Ndonga",ne:"Nepali",se:"Northern Sami",no:"Norwegian",nn:"Norwegian Nynorsk",oc:"Occitan",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetian",pi:"Pali",pa:"Panjabi",fa:"Persian",pl:"Polish",pt:"Portuguese",ps:"Pushto",qu:"Quechua",ro:"Romanian",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sr:"Serbian",sn:"Shona",ii:"Sichuan Yi",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",es:"Spanish",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zu:"Zulu"},touch:{useTouch:!0,useMouse:!0,dragStartEvents:"dragStart tapAndHold",dragPreventDefault:!1,scrollbars:!0},registry:{get:function(t){return localStorage.getItem(t)},set:function(t,e){return localStorage.setItem(t,e)},unset:function(t){return localStorage.removeItem(t)}},dialog:{$wrapper:null,$inner:null,$content:null,$actions:null,timeoutId:null,init:function(){var t=this;this.$wrapper=$('<div id="dialog" class="modal" tabindex="-1"><section class="inner"><div class="content"></div><ul class="actions"></ul><span class="close do-close"></span></section></div>').on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t.inPreshow()||t.hide()}).on("click mousedown",".inner",function(t){t.stopPropagation()}).on("click",".do-close",function(e){e.preventDefault(),e.stopPropagation(),t.hide()}).on("keydown",function(e){switch(e.keyCode){case 13:if(t.inPreshow())return;t.$actions.find("li > span").first().not(".disabled").trigger("click");break;case 27:if(t.inPreshow())return;t.hide()}}),this.$inner=this.$wrapper.find(".inner"),this.$content=this.$wrapper.find(".content"),this.$actions=this.$wrapper.find(".actions")},show:function(t){var i,a,s=this,o=0;this.$wrapper.appendTo(e.$body);var i=$.extend({content:null,title:"Alert",message:"Something happened apparently.",html:!1,class:null,dockable:!1,confirmation:!1,actions:{Okay:function(){this.hide()}}},t);for(this.$content.children().remove(),i.content?this.$content.html(i.content):(i.title&&this.$content.append('<h2 class="title">'+i.title+"</h2>"),i.message&&this.$content.append('<div class="message">'+(i.html?i.message:"<p>"+i.message+"</p>")+"</div>")),this.$actions.children().remove(),o=0,$.each(i.actions,function(t,e){$('<li><span class="button'+(0==o++?" special":"")+'">'+t+"</span></li>").appendTo(s.$actions).on("click",".button",function(t){var i=$(this);t.preventDefault(),t.stopPropagation(),i.hasClass("disabled")||e.apply(s)})}),i.confirmation&&(s.$actions.find("li > span").first().addClass("disabled"),this.$content.append('<div class="confirmation"><input type="checkbox" id="dialog-confirmation" /><label for="dialog-confirmation">'+i.confirmation+"</label></div>"),this.$content.find('input[type="checkbox"]').on("change",function(){var t=$(this),e=s.$actions.find("li > span").first();t.prop("checked")?e.removeClass("disabled"):e.addClass("disabled")})),a=this.$wrapper[0].classList,o=0;o<a.length;o++)"modal"!=a[o]&&"preshow"!=a[o]&&"visible"!=a[o]&&this.$wrapper.removeClass(a[o]);i.class&&this.$wrapper.addClass(i.class),i.dockable&&(e.$body.css("overflow","hidden"),e.$window.on("resize.dialog",function(){clearTimeout(s.timeoutId),s.timeoutId=setTimeout(function(){var t=e.$window.height(),i=s.$inner.height();s.$wrapper.hasClass("docked")?t>i&&s.$wrapper.removeClass("docked"):t<i&&s.$wrapper.addClass("docked")},25)}).trigger("resize.dialog")),window.setTimeout(function(){s.$wrapper.removeClass("preshow"),s.$wrapper.addClass("visible"),window.setTimeout(function(){s.$wrapper.focus()},150)},100)},hide:function(){var t=this;this.$wrapper.removeClass("visible"),window.setTimeout(function(){t.$content.children().remove(),t.$actions.children().remove(),e.$body.css("overflow",""),e.$window.off("resize.dialog"),clearTimeout(t.timeoutId)},500)},preshow:function(){var t=this;this.$wrapper.appendTo(e.$body),this.$wrapper.addClass("preshow"),window.setTimeout(function(){t.$wrapper.addClass("visible")},100),window.setTimeout(function(){t.$wrapper.focus()},250)},inPreshow:function(){return this.$wrapper.hasClass("preshow")}},$window:null,$document:null,$head:null,$body:null,URL_PLACEHOLDER:"http://domain.tld/path",round:function(t,e){var i="number"==typeof e?Math.pow(10,e):1;return Math.round(t*i)/i},toDataURL:function(t,e){var i;i=new XMLHttpRequest,i.open("GET",t,!0),i.responseType="blob",i.onload=function(t){var i;i=new FileReader,i.onloadend=function(){e(i.result)},i.readAsDataURL(this.response)},i.send()},markdownify:function(t,e){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t=t.replace(/[&<>"']/g,function(t){return i[t]}),t=t.replace(/\\_/g,"%5C%5F"),t=t.replace(/\\\*/g,"%5C%2A"),t=t.replace(/\\~/g,"%5C%7E"),t=t.replace(/\\`/g,"%5C%80"),t=t.replace(/\\=/g,"%5C%3D"),t=t.replace(/\\-/g,"%5C%2D"),t=t.replace(/\\\(/g,"%5C%28"),t=t.replace(/\\\)/g,"%5C%29"),t=t.replace(/\\\[/g,"%5C%5B"),t=t.replace(/\\\]/g,"%5C%5C");var a,s=t.match(/\[(.+?)\]\(([^\[\]]+?)\)/g);if(s&&s.length>0)for(a in s)t=t.replace(s[a],s[a].replace(/_/g,"%5F"));return t=t.replace(/\[(.+?)\]\(([^\[\]]+?)\)/g,'<span class="--a" data-href="$2">$1</span>'),t=t.replace(/\*\*([^\*]+?)\*\*/g,'<span class="--strong">$1</span>'),t=t.replace(/__([^_]+?)__/g,'<span class="--strong">$1</span>'),t=t.replace(/\*([^\*]+?)\*/g,'<span class="--em">$1</span>'),t=t.replace(/_([^_]+?)_/g,'<span class="--em">$1</span>'),t=t.replace(/`([^`]+?)`/g,'<span class="--code">$1</span>'),t=t.replace(/~~([^~]+?)~~/g,'<span class="--s">$1</span>'),t=t.replace(/==([^=]+?)==/g,'<span class="--mark">$1</span>'),e===!0&&(t=t.replace(/(^|\n)- (.+)/g,'$1<span class="--li">$2</span>')),t=t.replace(/%5C%5F/g,"_"),t=t.replace(/%5C%2A/g,"*"),t=t.replace(/%5C%7E/g,"~"),t=t.replace(/%5C%80/g,"`"),t=t.replace(/%5C%3D/g,"="),t=t.replace(/%5C%2D/g,"-"),t=t.replace(/%5C%28/g,"("),t=t.replace(/%5C%29/g,")"),t=t.replace(/%5C%5B/g,"["),t=t.replace(/%5C%5C/g,"]"),t=t.replace(/%5F/g,"_")},hasMarkdown:function(t,e){switch(t){case"link":return!!e.match(/\[(.+?)\]\(([^\[\]]+?)\)/g);case"strong":return!!e.match(/\*\*([^\*]+?)\*\*/g)||!!e.match(/__([^_]+?)__/g);case"emphasis":return!!e.match(/\*([^\*]+?)\*/g)||!!e.match(/_([^_]+?)_/g);case"code":return!!e.match(/`([^`]+?)`/g);case"strike":return!!e.match(/~~([^~]+?)~~/g);case"highlight":return!!e.match(/==([^=]+?)==/g);case"list-item":return!!e.match(/(^|\n)- (.+)/g)}return!1},transparentize:function(t,e){var i,a,s;return 1==e||"#"!=t.charAt(0)||7!=t.length&&9!=t.length?t:(i=t.substr(0,7),a=9==t.length?parseInt(t.substr(7,2),16):255,a=parseInt(a*e).toString(16),1==a.length&&(a="0"+a),s=(i+a).toUpperCase())},htmlaToHtml:function(t){return 9==t.length?t.substr(0,7):t},cleanHref:function(){var t=window.location.href;return t.indexOf("?")!==-1&&(t=t.split("?")[0]),t},cleanBaseHref:function(){return window.location.protocol+"//"+window.location.hostname},normalizeWheel:function(t){var e=10,i=40,a=800,s=0,o=0,n=0,r=0;return"detail"in t?o=t.detail:"wheelDelta"in t?o=t.wheelDelta/-120:"wheelDeltaY"in t&&(o=t.wheelDeltaY/-120),"wheelDeltaX"in t&&(s=t.wheelDeltaX/-120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(s=o,o=0),n=s*e,r=o*e,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||r)&&t.deltaMode&&(1==t.deltaMode?(n*=i,r*=i):(n*=a,r*=a)),n&&!s&&(s=n<1?-1:1),r&&!o&&(o=r<1?-1:1),{spinX:s,spinY:o,pixelX:n,pixelY:r}},scrollify:function(t,i){var a,s=$.extend({middle:!1,replay:!1,delay:0,offset:0,duration:0,onPlay:null},i);s.replay&&t.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.hasClass("played")&&(t.removeClass("played").removeClass("active").removeClass("paused"),setTimeout(function(){t.addClass("active"),s.onPlay&&s.onPlay(t),setTimeout(function(){t.addClass("played")},s.duration)},250))}),e.$window.on("scroll",function(e){var i,o=$(document).scrollTop(),n=window.innerHeight,r=0,h=0+t.outerHeight();t.hasClass("active")?t.hasClass("paused")?h>o&&r<o+n&&t.removeClass("paused"):(h<o||r>o+n)&&t.addClass("paused"):(s.middle?(i=o+n/2,result=i>r&&i<h):result=h>o&&r<o+n,result?(clearTimeout(a),a=setTimeout(function(){t.addClass("active"),s.onPlay&&s.onPlay(t),s.replay&&setTimeout(function(){t.addClass("played")},s.duration)},s.delay)):clearTimeout(a))}).triggerHandler("scroll")},init:function(t,i){$(function(){switch(e.$window=$(window),e.$document=$(document),e.$head=$("head"),e.$body=$("body"),skel.breakpoints({xlarge:"(max-width: 1680px)",large:"(max-width: 1280px)",medium:"(max-width: 980px)",small:"(max-width: 736px)",xsmall:"(max-width: 480px)",xxsmall:"(max-width: 360px)",short:"(max-height: 640px)"}),$.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},skel.vars.mobile?(e.$body.addClass("is-touch"),e.touch.useTouch=!0,e.touch.useMouse=!1,e.touch.dragStartEvents="tapAndHold",e.touch.dragPreventDefault=function(t){return t.inTapAndHold},e.touch.scrollbars=!1):e.$body.addClass("is-nonTouch"),skel.vars.IEVersion<12&&(e.$body.addClass("is-ie"),skel.vars.IEVersion<11&&e.$body.addClass("is-ie10")),e.$window.on("load",function(){window.setTimeout(function(){e.$body.removeClass("is-loading")},100)}),"admin"!=e.$body.attr("id")&&$("form").form(),e.dialog.init(),e.$body.on("click","a.behavior-long-wait",function(t){var i=$(this),a=i.attr("href");t.preventDefault(),t.stopPropagation(),e.dialog.preshow(),window.setTimeout(function(){window.location.href=a},750)}),e.$body.on("click","a.behavior-download",function(t){var i=$(this),a=i.attr("href");t.preventDefault(),t.stopPropagation(),e.dialog.preshow(),window.setTimeout(function(){window.location.href=a,e.dialog.show({title:"Downloading Zip",message:"Preparing your download. Please wait a moment.",actions:{Dismiss:function(){this.hide()}}})},750)}),e.$body.on("click","a.behavior-requires-confirmation",function(t){var i=$(this),a=i.attr("href"),s=i.text(),o={};t.preventDefault(),t.stopPropagation(),o[s]=function(){window.location.href=a},o.Cancel=function(){this.hide()},e.dialog.show({title:"Are you sure?",message:null,actions:o})}),e.$body.on("click","a.behavior-requires-double-confirmation",function(t){var i=$(this),a=i.attr("href"),s=i.text(),o={};t.preventDefault(),t.stopPropagation(),o[s]=function(){window.location.href=a},o.Cancel=function(){this.hide()},e.dialog.show({title:"Are you sure?",message:null,confirmation:"Yes, I am sure I want to do this.",actions:o})}),e.$body.on("click",".behavior-requires-pro-plus",function(t){$(this);t.preventDefault(),t.stopPropagation(),e.dialog.show({title:"Upgrade to Pro Plus",message:"Upgrade to the <strong>Pro Plus</strong> plan and get access to this and many other awesome features.",actions:{"Learn More":function(){this.hide(),window.location.href="/dashboard/account/upgrade"},"Maybe Later":function(){this.hide()}}})}),e.$body.on("click",".behavior-requires-verification",function(t){$(this);t.preventDefault(),t.stopPropagation(),e.dialog.show({title:"Not Verified!",message:"Woops, looks like you haven't verified your account yet! Please click the link in the verification email we sent you before trying to upgrade."})}),e.$body.attr("id")){case"default":case"dashboard":$(".deferred").length>0&&!function(){var t,i=$(".deferred");i.each(function(){var t=$(this),e=t.children("img").first(),i=e[0];t.css("background-image","url("+e.attr("src")+")").css("background-size","100% auto").css("background-position","top left").css("background-repeat","no-repeat"),e.css("opacity","0").css("transition","opacity 0.375s ease-in-out"),e.on("load",function(a){"done"==e.data("src")&&(Date.now()-i._startLoad<375?(t.removeClass("loading"),t.css("background-image","none"),e.css("transition",""),e.css("opacity","1")):(t.removeClass("loading"),e.css("opacity","1"),setTimeout(function(){t.css("background-image","none")},375)))})}),t=function(){var t=document.documentElement.clientHeight,e="ios"==skel.vars.os?document.body.scrollTop:document.documentElement.scrollTop,a=e+t;i.each(function(){var i=$(this),s=i.children("img").first(),o=s[0];if(null===o.offsetParent)return!0;if("done"===s.data("src"))return!0;var n,r=o.getBoundingClientRect(),h=e+Math.floor(r.top)-t,l=e+Math.ceil(r.bottom)+t;h<=a&&l>=e&&(n=s.data("src"),s.data("src","done"),i.addClass("loading"),o._startLoad=Date.now(),s.attr("src",n))})},e.$window.on("load resize scroll",t)}();break;case"index":$('[href="#about"]').on("click",function(t){t.stopPropagation(),t.preventDefault();var i=$(this).attr("href"),a=$(i).find("header"),s=a.offset().top-.1*e.$window.height();$("body,html").stop().animate({scrollTop:s},1e3,"swing")}),e.scrollify($(".carousel")),skel.vars.IEVersion<=10&&$(".carousel a").css("width","35em"),e.scrollify($(".highlight.simple"),{middle:!0,delay:125,offset:25,duration:5e3,replay:!0}),e.scrollify($(".highlight.responsive"),{middle:!0,delay:125,offset:25,duration:5e3,replay:!0,onPlay:"edge"!=skel.vars.browser&&"ie"!=skel.vars.browser?null:function(t){var e=t.find(".image");setTimeout(function(){e.css("background-image",'url("/assets/images/landing/site-3.jpg")')},1e3),setTimeout(function(){e.css("background-image",'url("/assets/images/landing/site-3-mobile.jpg")')},4e3)}}),e.scrollify($(".highlight.free"),{middle:!0,delay:125,offset:25,duration:6e3,replay:!0,onPlay:"edge"!=skel.vars.browser&&"ie"!=skel.vars.browser?null:function(t){var e=[["/assets/images/landing/site-1.jpg","/assets/images/landing/site-2.jpg","/assets/images/landing/site-3.jpg"],["/assets/images/landing/site-2.jpg","/assets/images/landing/site-3.jpg","/assets/images/landing/site-4.jpg"],["/assets/images/landing/site-3.jpg","/assets/images/landing/site-4.jpg","/assets/images/landing/site-5.jpg"]],i=[t.find(".site.n1"),t.find(".site.n2"),t.find(".site.n3")];setTimeout(function(){i[0].css("background-image",'url("'+e[1][0]+'")'),i[1].css("background-image",'url("'+e[1][1]+'")'),i[2].css("background-image",'url("'+e[1][2]+'")')},650),setTimeout(function(){i[0].css("background-image",'url("'+e[2][0]+'")'),i[1].css("background-image",'url("'+e[2][1]+'")'),i[2].css("background-image",'url("'+e[2][2]+'")')},3e3),setTimeout(function(){i[0].css("background-image",'url("'+e[0][0]+'")'),i[1].css("background-image",'url("'+e[0][1]+'")'),i[2].css("background-image",'url("'+e[0][2]+'")')},5350)}})}})}});return e}(),app.init()},{form:"form",jquery:"jquery","jquery.touch":"jquery.touch",md5:"md5",skel:"skel",tabs:"tabs",web:"web"}],formColor:[function(t,e,i){function a(t){var e,i,a,s,o,n,r,h,l,c=this;this.alpha="1"==t.data("alpha"),t.removeData("alpha").removeAttr("data-alpha"),this.optional="1"==t.data("optional"),this.optional&&t.attr("placeholder","(none)"),t.attr("type","text").attr("data-manual","1").data("manual","1").attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck","false").attr("maxlength",this.alpha?9:7).on("focus",function(){e.addClass("focus")}).on("blur",function(){e.removeClass("focus")}),n={$input:null,$swatch:null,currentValue:"#FFFFFF",init:function(t){var e=this;this.$input=t,c.optional&&(this.currentValue=""),this.$swatch=$('<div class="swatch" />').insertBefore(this.$input),this.$input.on("change input",function(t,i){if(!i){var a,s,p=e.$input.val();if(""==p&&c.optional)o=!0,h.pos=0,r.pos[0]=100,r.pos[1]=0,c.alpha&&(l.pos=100);else{if(o=!1,a=c.hexaToRgba(p),!a)return;n.currentValue=p.toUpperCase(),s=c.rgbaToHsva(a.r,a.g,a.b,a.a),h.pos=100*s.h,r.pos[0]=100*s.s,r.pos[1]=100*(1-s.v),c.alpha?l.pos=100*s.a:l.pos=0}c.alpha&&l.sync(),h.sync(),r.sync(),e.sync()}}).on("blur",function(){e.$input.val(n.currentValue)})},sync:function(){if(o)return e.addClass("empty"),this.$swatch.css("background-color",""),n.currentValue="",this.$input.val("").trigger("change",!0),void r.redraw();e.removeClass("empty"),h.changed()&&r.redraw();var t={h:null,s:null,v:null,a:null};t.h=h.pos/100,t.s=r.pos[0]/100,t.v=1-r.pos[1]/100,c.alpha?t.a=l.pos/100:t.a=1;var i=c.hsvaToRgba(t.h,t.s,t.v,t.a),a=c.rgbaToHexa(i.r,i.g,i.b,i.a),s="rgba("+i.r+","+i.g+","+i.b+","+i.a/255+")";this.$swatch.css("background-color",s),n.currentValue=a,this.$input.val()!=a&&this.$input.val(a).trigger("change",!0)}},e=$('<div class="form-color '+(t.attr("class")?t.attr("class"):"")+'"><div class="swatch"></div><div class="content"><div class="inner"><div class="hueSlider"><div class="cursor"></div><canvas></canvas></div><div class="picker"><div class="cursor"></div><canvas></canvas></div>'+function(){return c.alpha?'<div class="alphaSlider"><div class="cursor"></div><canvas></canvas></div>':""}()+"</div></div></div>").insertAfter(t),t.prependTo(e),e.find(".content").on("mousedown touchstart",function(t){t.preventDefault(),t.stopPropagation()}),i=e.find(".picker"),r={$cursor:null,$wrapper:null,$canvas:null,canvas:null,context:null,imageData:null,pos:[0,0],sync:function(){this.$cursor.css("left",this.pos[0]+"%").css("top",this.pos[1]+"%")},init:function(t){var e=this;this.$wrapper=t,this.$canvas=this.$wrapper.find("canvas").css("position","absolute").css("top",0).css("left",0).css("width","100%").css("height","100%").css("cursor","crosshair"),this.canvas=this.$canvas[0],this.canvas.width=100,this.canvas.height=100,this.context=this.canvas.getContext("2d"),this.imageData=this.context.getImageData(0,0,100,100),this.$cursor=this.$wrapper.find(".cursor"),this.$canvas.touch({useMouse:app.touch.useMouse,useTouch:app.touch.useTouch,trackDocument:!0,trackDocumentNormalize:!0,dragThreshold:0,dragDelay:0,preventDefault:{drag:!0}}).on("tap dragStart drag",function(t,i){e.pos[0]=Math.round(i.ex/e.$canvas.width()*100),e.pos[1]=Math.round(i.ey/e.$canvas.height()*100),o=!1,e.sync(),n.sync()}),this.redraw()},redraw:function(){var t,e,i,a,s,o;for(t=0;t<100;t++)for(e=0;e<100;e++)i=e,a=99-t,o=c.hsvaToRgba(h.pos/100,e/100,t/100,1),s=4*(i+100*a),this.imageData.data[s+0]=o.r,this.imageData.data[s+1]=o.g,this.imageData.data[s+2]=o.b,this.imageData.data[s+3]=255;this.context.putImageData(this.imageData,0,0),this.sync()}},a=e.find(".hueSlider"),h={$cursor:null,$wrapper:null,$canvas:null,canvas:null,context:null,imageData:null,pos:0,lastPos:0,changed:function(){return this.pos!=this.lastPos},sync:function(){this.$cursor.css("top",this.pos+"%")},init:function(t){var e=this;this.$wrapper=t,this.$canvas=this.$wrapper.find("canvas").css("position","absolute").css("top",0).css("left",0).css("width","100%").css("height","100%").css("cursor","crosshair").appendTo(this.$wrapper),this.canvas=this.$canvas[0],this.canvas.width=1,this.canvas.height=100,this.context=this.canvas.getContext("2d"),this.imageData=this.context.getImageData(0,0,1,100),this.$cursor=this.$wrapper.find(".cursor"),this.$canvas.touch({useMouse:app.touch.useMouse,useTouch:app.touch.useTouch,trackDocument:!0,trackDocumentNormalize:!0,dragThreshold:0,dragDelay:0,preventDefault:{drag:!0}}).on("tap dragStart drag",function(t,i){e.lastPos=e.pos,e.pos=Math.round(i.ey/e.$canvas.height()*100),o=!1,e.sync(),n.sync()}),this.redraw()},redraw:function(){var t,e,i,a,s;for(t=0;t<100;t++)for(s=c.hsvaToRgba(t/100,1,1,1),i=t,e=0;e<1;e++)a=4*(e+1*i),this.imageData.data[a+0]=s.r,this.imageData.data[a+1]=s.g,this.imageData.data[a+2]=s.b,this.imageData.data[a+3]=s.a;this.context.putImageData(this.imageData,0,0),this.sync(),this.lastPos=this.pos}},s=e.find(".alphaSlider"),l={$cursor:null,$wrapper:null,$canvas:null,canvas:null,context:null,imageData:null,pos:0,lastPos:0,changed:function(){return this.pos!=this.lastPos},sync:function(){this.$cursor.css("left",this.pos+"%")},init:function(t){var e=this;this.$wrapper=t,this.$canvas=this.$wrapper.find("canvas").css("position","absolute").css("top",0).css("left",0).css("width","100%").css("height","100%").css("cursor","crosshair").appendTo(this.$wrapper),this.canvas=this.$canvas[0],this.canvas.width=100,this.canvas.height=1,this.context=this.canvas.getContext("2d"),this.imageData=this.context.getImageData(0,0,100,1),this.$cursor=this.$wrapper.find(".cursor"),this.$canvas.touch({useMouse:app.touch.useMouse,useTouch:app.touch.useTouch,trackDocument:!0,trackDocumentNormalize:!0,dragThreshold:0,dragDelay:0,preventDefault:{drag:!0}}).on("tap dragStart drag",function(t,i){e.lastPos=e.pos,e.pos=Math.round(i.ex/e.$canvas.width()*100),o=!1,e.sync(),n.sync()}),this.redraw()},redraw:function(){var t,e,i,a;for(t=0;t<100;t++)for(i=t,e=0;e<1;e++)a=4*(e+1*i),this.imageData.data[a+0]=255,this.imageData.data[a+1]=255,this.imageData.data[a+2]=255,this.imageData.data[a+3]=i/100*255;this.context.putImageData(this.imageData,0,0),this.sync(),this.lastPos=this.pos}},n.init(t),r.init(i),h.init(a),this.alpha&&l.init(s),t.triggerHandler("change")}a.prototype.rgbaToHsva=function(t,e,i,a){var s,o=Math.max(t,e,i),n=Math.min(t,e,i),r=o-n,h=0===o?0:r/o,l=o/255,a=a/255;switch(o){case n:s=0;break;case t:s=e-i+r*(e<i?6:0),s/=6*r;break;case e:s=i-t+2*r,s/=6*r;break;case i:s=t-e+4*r,s/=6*r}return{h:s,s:h,v:l,a:a}},a.prototype.hexaToRgba=function(t){var e,i,a,s=255;if("#"!=t.charAt(0))return null;if(t=t.substr(1),6==t.length){if(e=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),isNaN(e)||isNaN(i)||isNaN(a))return null}else{if(8!=t.length||!this.alpha)return null;if(e=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),s=parseInt(t.substr(6,2),16),isNaN(e)||isNaN(i)||isNaN(a)||isNaN(s))return null}return{r:e,g:i,b:a,a:s}},a.prototype.rgbaToHexa=function(t,e,i,a){var s,o,n,r;return s=t.toString(16),o=e.toString(16),n=i.toString(16),r=a.toString(16),1==s.length&&(s="0"+s),1==o.length&&(o="0"+o),1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),this.alpha&&"ff"!=r||(r=""),"#"+(s+o+n+r).toUpperCase()},a.prototype.hsvaToRgba=function(t,e,i,a){var s,o,n,r,h,l,c,p;switch(r=Math.floor(6*t),h=6*t-r,l=i*(1-e),c=i*(1-h*e),p=i*(1-(1-h)*e),r%6){case 0:s=i,o=p,n=l;break;case 1:s=c,o=i,n=l;break;case 2:s=l,o=i,n=p;break;case 3:s=l,o=c,n=i;break;case 4:s=p,o=l,n=i;break;case 5:s=i,o=l,n=c}return{r:Math.round(255*s),g:Math.round(255*o),b:Math.round(255*n),a:Math.round(255*a)}},$.fn.formColor=function(){var t=$(this);if(0==this.length)return t;if(this.length>1){for(var e=0;e<this.length;e++)$(this[e]).formColor();return t}return"_formColor"in this[0]||(this[0]._formColor=new a(t)),t},"undefined"!=typeof e&&(e.exports=a)},{}],formGroup:[function(t,e,i){function a(t,e){var i,a=this;this.count=1e3,this.states=[],this.isDragging=!1,this.hasDropTarget=!1,this.id=t.attr("id"),t.removeAttr("id"),this.name=t.attr("name"),t.removeAttr("name"),this.title=t.data("title"),t.removeData("title").removeAttr("data-title"),i=t.data("value"),t.removeData("value").removeAttr("data-value"),this.form=e,this.min=t.data("min"),t.removeData("min").removeAttr("data-min"),this.max=t.data("max"),t.removeData("max").removeAttr("data-max"),this.collapse="1"==t.data("collapse"),t.removeData("collapse").removeAttr("collapse"),this.collapseAlt="1"==t.data("collapse-alt"),t.removeData("collapse-alt").removeAttr("collapse-alt"),this.collapseSingular="1"==t.data("collapse-singular"),t.removeData("collapse-singular").removeAttr("collapse-singular"),t.data("clone-fields")?(this.cloneFields=t.data("clone-fields").split(","),t.removeData("clone-fields").removeAttr("clone-fields")):this.cloneFields=null,this.exposeCount="1"==t.data("expose-count"),t.removeData("expose-count").removeAttr("expose-count"),this.$template=$('<div class="item"><div class="header"><span class="title"></span><div class="do-delete"></div></div><div class="inner"></div></div>'),t.children().appendTo(this.$template.children(".inner")),this.$placeholder=$('<div class="placeholder" />'),this.$wrapper=t,this.$wrapper.attr("id",this.id).attr("name",this.name).on("blur","input, select, textarea",function(t){a.$wrapper.trigger("blur")}).on("input","select",function(t){a.change()}).on("change.title",'[name^="'+this.title+'_"]',function(){var t=$(this),e=t.parents(".item"),i=t.val();i?"SELECT"==this.tagName&&(i=t.find('option[value="'+i+'"]').text()):i="(untitled)",e.find(".header .title").text(i)}).on("click",".item .footer .do-delete",function(){var t=$(this),e=t.parents(".item");a.remove(a.itemIndex(e))}),this.$items=$('<div class="items"></div>').appendTo(this.$wrapper).touch({useMouse:app.touch.useMouse,useTouch:app.touch.useTouch,dragThreshold:0,dragDelay:0,tapAndHoldDelay:300,trackDocument:!0,delegateSelector:".item, .item > .inner",dropFilter:".item",preventDefault:{drag:app.touch.dragPreventDefault}}).on("click",".item",function(t){var e=$(t.target);"A"==e[0].tagName&&"#"==e.attr("href").charAt(0)||t.stopPropagation()}).on("tap dragStart tapAndHold",".item > .inner",function(t,e){t.stopPropagation()}).on("click",".do-delete",function(t,e){var i=$(this),s=i.parents(".item");t.stopPropagation(),a.remove(a.itemIndex(s))}).on("tap",".item",function(t,e){var i=$(this);t.stopPropagation(),a.toggle(a.itemIndex(i)),a.$items.trigger("click")}).on(app.touch.dragStartEvents,".item",function(t,e){var i=$(this),s=app.$document.scrollLeft(),o=app.$document.scrollTop(),n=i[0].getBoundingClientRect().width,r=i[0].getBoundingClientRect().height;t.stopPropagation(),a.isDragging=!0,a.$wrapper.addClass("is-dragging"),"android"==skel.vars.os&&app.$body.css("overflow","hidden"),a.$placeholder.css("width",n+"px").css("height",r+"px").insertBefore(i),i.css("width",n+"px").css("height",r+"px").addClass("is-dragging").css("left",e.x-e.ex-s+"px").css("top",e.y-e.ey-o+"px")}).on("drag",".item",function(t,e){var i=$(this),s=app.$document.scrollLeft(),o=app.$document.scrollTop();i.hasClass("is-dragging")&&a.isDragging&&(t.stopPropagation(),i.css("left",e.x-e.start.ex-s+"px").css("top",e.y-e.start.ey-o+"px"))}).on("dragEnd tapAndHoldEnd",".item",function(t,e){var i=$(this);i.hasClass("is-dragging")&&a.isDragging&&(t.stopPropagation(),a.isDragging=!1,a.$wrapper.removeClass("is-dragging"),"android"==skel.vars.os&&app.$body.css("overflow",""),a.$placeholder.detach().css("width","").css("height",""),i.removeClass("is-dragging").css("left","").css("top","").css("width","").css("height",""),a.hasDropTarget=!1,i.removeClass("is-dropTarget").removeClass("after").removeClass("before"))}).on("dragEnter",".item",function(t,e){var i=$(this),s=$(e.element);i.hasClass("is-dragging")&&a.isDragging&&(t.stopPropagation(),a.hasDropTarget=!0,s.add(s.siblings()).removeClass("is-dropTarget").removeClass("after").removeClass("before"),s.addClass("is-dropTarget"))}).on("dragOver",".item",function(t,e){var i=$(this),s=$(e.element);i.hasClass("is-dragging")&&a.isDragging&&(t.stopPropagation(),e.ey<Math.ceil(s.outerHeight()/2)?s.addClass("before").removeClass("after"):s.addClass("after").removeClass("before"))}).on("dragLeave",".item",function(t,e){var i=$(this),s=$(e.element);i.hasClass("is-dragging")&&a.isDragging&&(t.stopPropagation(),a.hasDropTarget=!1,s.removeClass("is-dropTarget"))}).on("drop",".item",function(t,e){var i,s=$(this),o=$(e.element);s.hasClass("is-dragging")&&a.isDragging&&a.hasDropTarget&&(t.stopPropagation(),a.hasDropTarget=!1,i=o.hasClass("after")?1:-1,o.removeClass("is-dropTarget").removeClass("after").removeClass("before"),a.move(s,o,i))}),this.$footer=$('<div class="footer"><ul class="actions fit"><li><span class="button fit do-add">Add</span></li></ul></div>').appendTo(this.$wrapper),this.$footer.on("click",".do-add",function(t){t.preventDefault(),a.add()}).on("click",".do-dump",function(t){t.stopPropagation(),t.preventDefault()}),this.exposeCount?this.$count=$('<input type="hidden" name="'+this.id+'_count" id="'+this.id+'_count" value="0" />').appendTo(this.$wrapper):this.$count=null,this.sync(),i&&this.val(JSON.parse(i))}a.prototype.itemIndex=function(t){return this.$wrapper.find(".item").index(t)},a.prototype.get=function(t){return this.$item.eq(t)},a.prototype.length=function(){return this.$items.children(".item").length},a.prototype.toggle=function(t){this.states[t]===!0?(this.get(t).removeClass("collapsed").find("textarea[data-autosize]").triggerHandler("--refresh-input"),this.states[t]=!1,this.collapseSingular&&this.collapseAll(t)):(this.get(t).addClass("collapsed"),this.states[t]=!0)},a.prototype.collapseAll=function(t){var e=0,i=this.length();for(e=0;e<i;e++)"undefined"!=typeof t&&e==t||(this.get(e).addClass("collapsed"),this.states[e]=!0)},a.prototype.move=function(t,e,i){var a,s,o,n;if("object"==typeof t?(a=t,o=this.itemIndex(t)):(a=this.get(t),o=t),"object"==typeof e?(s=e,n=this.itemIndex(e)):(s=this.get(e),n=e),!(o==n||n<0||n>=this.length())){1==i?a.insertAfter(s):a.insertBefore(s);var t=this.states[n];this.states[n]=this.states[o],this.states[o]=t,this.sync(),this.change()}},a.prototype.remove=function(t){this.removeBase(t),this.sync(),this.change()},a.prototype.removeBase=function(t){if(!(this.length()<=this.min)){var e=this.get(t);e.remove(),this.states.splice(t,1)}},a.prototype.add=function(){var t;this.collapseSingular&&this.collapseAll(),t=this.addBase(),t&&(this.form.initType_Image(t),this.form.initType_Color(t),this.form.initModifiers(t),this.form.initRequires(t,this.form.$obj),this.sync(),this.change())},a.prototype.addBase=function(){var t=this.$template.clone(!0),e=this.count++;if(!(this.max>0&&this.length()>=this.max)){if(t.data("id",e),t.find("input, textarea, select").each(function(){var i=$(this),a=i.attr("type"),s=i.parents(".field").first(),o=i.attr("id"),n=i.attr("name"),r=s.attr("data-requires"),h=t.find('label[for="'+o+'"]');i.attr("id",o.replace("_xxx","_"+e)).attr("name",n.replace("_xxx","_"+e)),h.length>0&&h.attr("for",o.replace("_xxx","_"+e)),"checkbox"!=a&&"radio"!=a&&h.on("click",function(t){t.preventDefault()}),r&&s.attr("data-requires",r.replace("_xxx","_"+e)),
i.val(i.attr("value"))}),this.cloneFields&&this.length()>0){var i,a,s,o,n;i=this.$item.last();for(n in this.cloneFields)o=this.cloneFields[n],a=i.find('[name^="'+o+'_"]').first(),s=t.find('[name^="'+o+'_"]').first(),s.val(a.val())}return t.appendTo(this.$items),t}},a.prototype.val=function(t,e){if(t){var i,a,s,o,n,r,h=Math.max(t.length,this.min),l=this.length();if(0==h)this.$item.remove();else if(h>l){for(i=l;i<h;i++)this.addBase();this.$item=this.$items.children(".item")}else if(h<l){for(i=l;i>h;i--)this.removeBase(i-1);this.$item=this.$items.children(".item")}if(h>0){this.$items.find("input, textarea, select").val("");for(i in t){n=this.get(i),o=n.data("id");for(a in t[i])if("object"==typeof t[i][a])for(s in t[i][a])r=n.find('[name="'+a+"."+s+"_"+o+'"]'),"checkbox"==r.attr("type")?r.prop("checked",t[i][a][s]):r.val(t[i][a][s]);else r=n.find('[name="'+a+"_"+o+'"]'),"checkbox"==r.attr("type")?r.prop("checked",t[i][a]):r.val(t[i][a]),r.trigger("change");i in this.states?this.states[i]===!1?n.removeClass("collapsed"):n.addClass("collapsed"):this.collapse&&(!this.collapseAlt||i>0)?n.addClass("collapsed"):n.removeClass("collapsed")}}return this.sync(),e!==!0&&this.$wrapper.trigger("groupChange"),this.$wrapper}var c=[];return this.$item.each(function(){var t=$(this),e={};t.find("input, textarea, select").each(function(){var t=$(this),i=t.attr("name").replace(/_[0-9]+$/,"").split("."),a=t.val();"checkbox"==t.attr("type")&&(a=!!t.prop("checked")),2==i.length?(i[0]in e||(e[i[0]]={}),e[i[0]][i[1]]=a):e[i[0]]=a}),c.push(e)}),c},a.prototype.change=function(){this.$wrapper.trigger("change").trigger("groupChange")},a.prototype.sync=function(){var t=this,e=this.length();this.$item=this.$items.children(".item"),0==e?this.$wrapper.addClass("empty"):(this.$wrapper.removeClass("empty"),this.$items.find('[name^="'+this.title+'_"]').trigger("change.title")),this.states=[],this.$item.each(function(){t.states.push($(this).hasClass("collapsed"))}),this.exposeCount&&this.$count.val(e).attr("value",e).trigger("change")},a.prototype.dump=function(){},a.prototype.scrollTop=function(){return $(window).scrollTop()},$.fn.formGroup=function(t){var e=$(this);if(0==this.length)return e;if(this.length>1){for(var i=0;i<this.length;i++)$(this[i]).formGroup(t);return e}return this[0]._formGroup=new a(e,t),e},function(){var t=this.val=$.fn.val;$.fn.val=function(e){return"_formGroup"in this?this._formGroup.val(e):this.length>0&&"_formGroup"in this[0]?this[0]._formGroup.val(e):"undefined"==typeof e?t.call(this):t.call(this,e)}}(),e.exports=a},{}],formImageUploader:[function(t,e,i){function a(t){var e,i=this;this.inputPrefix="",this.image={canvas:null,width:0,height:0,type:null,size:0,orientation:null,animated:!1,cropAllowed:!1},this.canvasWrapper={width:0,height:0,zoom:1},this.crop={controlSize:60,initialMargin:40,square:!1,minWidth:150,minHeight:150,topLeft:{x:null,y:null},bottomRight:{x:null,y:null},width:function(){return this.bottomRight.x-this.topLeft.x},height:function(){return this.bottomRight.y-this.topLeft.y}},this.settings={crop:!0,maxCanvasWH:2560,maxWH:1024,maxSize:2048,forceCanvas:!1,forceType:!1,forceSquare:!1,circle:!1,minWidth:150,minHeight:150},this.$window=$(window).on("resize",function(){i.modalVisible()&&i.rescale()}),this.$obj=t.on("destroyed",function(){i.$modal.remove()}),"undefined"!=typeof(e=this.$obj.attr("data-crop"))&&(this.settings.crop="1"==e),"undefined"!=typeof(e=this.$obj.attr("data-maxWH"))&&(this.settings.maxWH=parseInt(e),this.settings.maxCanvasWH=2.5*this.settings.maxWH),"undefined"!=typeof(e=this.$obj.attr("data-maxCanvasWH"))&&(this.settings.maxCanvasWH=parseInt(e)),"undefined"!=typeof(e=this.$obj.attr("data-maxSize"))&&(this.settings.maxSize=parseInt(e)),"undefined"!=typeof(e=this.$obj.attr("data-forceCanvas"))&&(this.settings.forceCanvas="1"==e),"undefined"!=typeof(e=this.$obj.attr("data-forceType"))&&(this.settings.forceType=e),"undefined"!=typeof(e=this.$obj.attr("data-forceSquare"))&&(this.settings.forceSquare="1"==e),"undefined"!=typeof(e=this.$obj.attr("data-circle"))&&(this.settings.circle="1"==e),"undefined"!=typeof(e=this.$obj.attr("data-minWidth"))&&(this.crop.minWidth=this.settings.minWidth=parseInt(e)),"undefined"!=typeof(e=this.$obj.attr("data-minHeight"))&&(this.crop.minHeight=this.settings.minHeight=parseInt(e)),this.$idInput=this.$obj.find(".id").css("position","absolute").css("width","0px").css("height","0px").css("visibility","hidden").css("z-index","-1").css("overflow","hidden").css("-moz-pointer-events","none").css("-webkit-pointer-events","none").css("-ms-pointer-events","none").css("pointer-events","none").on("--refresh-image",function(){var t,e;t=i.$dataInput.val(),e=i.$idInput.val(),t&&e?(i.$thumbnail.css("background-image","url("+t+")"),i.$obj.removeClass("new")):(i.$thumbnail.css("background-image",""),i.$obj.addClass("new"))}),this.$dataInput=this.$obj.find(".data").css("display","none"),this.$thumbnail=$('<div class="thumbnail"></div>').prependTo(this.$obj).css("background-size","cover").css("background-position","center").on("click",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||i.$fileInput.trigger("click")}),this.$obj.on("click",".do-upload",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||i.$fileInput.trigger("click")}),this.$obj.on("click",".do-clear",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||(url=i.$image.attr("src"),url&&url.match(/^blob:/)&&url!=i.$idInput.val()&&i.revokeObjectURL(url),i.$image.attr("src",""),i.$thumbnail.css("background-image",""),i.$dataInput.val("").trigger("change"),i.$idInput.val("").trigger("change"),i.$obj.addClass("new"))}),this.$modal=$('<div class="modal form-image-uploader-modal" tabindex="-1"><div class="inner"><div class="wrapper"><div class="canvas-wrapper"><canvas /><div class="crop"><div class="controls" data-control="move"><div class="control top-left" data-control="topLeft"></div><div class="control top-right" data-control="topRight"></div><div class="control bottom-right" data-control="bottomRight"></div><div class="control bottom-left" data-control="bottomLeft"></div></div></div></div></div><ul class="options"><li><span class="square'+(this.settings.forceSquare?" active disabled":"")+'"><span class="label">Lock</span></span></li><li><span class="guide"><span class="label">Guide</span></span></li><li><span class="expand"><span class="label">Expand</span></span></li></ul><ul class="actions"><li><a href="#" class="button special do-save"><span class="label">Accept</span></a></li><li><a href="#" class="button do-cancel"><span class="label">Cancel</span></a></li></ul></div></div>').appendTo($("body")).css("-moz-user-select","none").css("-webkit-user-select","none").css("-ms-user-select","none").css("user-select","none").on("mousedown",function(t){t.preventDefault(),t.stopPropagation(),i.hideModal()}).on("keydown",function(t){switch(t.keyCode){case 13:t.preventDefault(),t.stopPropagation(),i.hideModal(!0);break;case 27:t.preventDefault(),t.stopPropagation(),i.hideModal();break;case 37:case 38:case 39:case 40:t.preventDefault(),t.stopPropagation();var e=0,a=0;switch(t.keyCode){case 37:e=-2;break;case 38:a=-2;break;case 39:e=2;break;case 40:a=2}i.cropControl_move(e,a),i.redrawCrop()}}),this.$modalContent=this.$modal.children(".inner").on("click mousedown",function(t){t.stopPropagation()}).on("click",".do-save",function(t){t.preventDefault(),t.stopPropagation(),i.hideModal(!0)}).on("click",".do-cancel",function(t){t.preventDefault(),t.stopPropagation(),i.hideModal()}),this.$canvas=this.$modalContent.find("canvas").css("position","absolute").css("top",0).css("left",0),this.image.canvas=this.$canvas[0],this.$canvasWrapper=this.$modalContent.find(".canvas-wrapper").css("position","relative").css("overflow","hidden").css("max-width","100%"),this.$image=$("<img />").on("load",function(){i.completeLoad()}),this.$crop=this.$modalContent.find(".crop").css("position","absolute").css("z-index",1).css("left",0).css("top",0),this.$cropControls=this.$modalContent.find(".controls").css("position","absolute").css("top",0).css("left",0).css("width","100%").css("height","100%"),e=-1*(.5*this.crop.controlSize),this.$cropControls.find(".control").css("position","absolute").css("width",this.crop.controlSize+"px").css("height",this.crop.controlSize+"px"),this.$cropControls.find(".top-left").css("top",e).css("left",e),this.$cropControls.find(".top-right").css("top",e).css("right",e),this.$cropControls.find(".bottom-right").css("bottom",e).css("right",e),this.$cropControls.find(".bottom-left").css("bottom",e).css("left",e),this.$fileInput=$('<input type="file" name="image" autocomplete="off" accept="image/jpeg,image/gif,image/png,image/svg+xml" />').on("change",function(){i.load(i.$fileInput.prop("files")[0]),i.$fileInput.val("")}),this.$squareOption=this.$modalContent.find(".options .square").on("click",function(){var t=$(this);i.settings.forceSquare||(t.hasClass("active")?(i.crop.square=!1,t.removeClass("active")):(i.crop.square=!0,i.squarifyCrop(),t.addClass("active")),i.redrawCrop())}),this.$expandOption=this.$modalContent.find(".options .expand").on("click",function(){i.expandCrop(),i.redrawCrop()}),this.$guideOption=this.$modalContent.find(".options .guide").on("click",function(){var t=$(this);t.hasClass("active")?(t.removeClass("active"),i.$modal.removeClass("guide")):(t.addClass("active"),i.$modal.addClass("guide"))}),this.$canvasWrapper.touch({useMouse:app.touch.useMouse,useTouch:app.touch.useTouch,trackDocument:!0,trackDocumentNormalize:!0,dragThreshold:0,dragDelay:0,tapAndHoldDelay:300,preventDefault:{drag:!0}}).on("dragStart tapAndHold",function(t,e){var a="scrollY"in window?window.scrollY:window.pageYOffset,s=$(document.elementFromPoint(e.x,e.y-a)),o=s.data("control");i.$crop.addClass("active"),o&&(this._control="cropControl_"+o,this._x=e.x,this._y=e.y)}).on("dragEnd",function(t,e){"_control"in this&&(delete this._x,delete this._y,delete this._control,i.$crop.removeClass("active"))}).on("drag",function(t,e){if("_control"in this){var a=e.x-this._x,s=e.y-this._y;i[this._control](a,s),i.redrawCrop(),this._x=e.x,this._y=e.y}}),this.$idInput.triggerHandler("--refresh-image")}a.prototype.createObjectURL=function(t){var e;return e="undefined"!=typeof window.webkitURL?window.webkitURL.createObjectURL(t):"undefined"!=typeof window.URL?window.URL.createObjectURL(t):null},a.prototype.revokeObjectURL=function(t){"undefined"!=typeof window.webkitURL?window.webkitURL.revokeObjectURL(t):"undefined"!=typeof window.URL&&window.URL.revokeObjectURL(t)},a.prototype.moveCrop=function(t,e){(this.crop.topLeft.x+t<0||this.crop.bottomRight.x+t>this.image.width)&&(t=0),(this.crop.topLeft.y+e<0||this.crop.bottomRight.y+e>this.image.height)&&(e=0),this.crop.topLeft.x+=t,this.crop.topLeft.y+=e,this.crop.bottomRight.x+=t,this.crop.bottomRight.y+=e},a.prototype.resizeCrop=function(t,e,i,a){var s=this.crop.bottomRight.x-this.crop.topLeft.x,o=this.crop.bottomRight.y-this.crop.topLeft.y;if(t>0&&s-t<this.crop.minWidth&&(t=0),i<0&&s+i<this.crop.minWidth&&(i=0),e>0&&o-e<this.crop.minHeight&&(e=0),a<0&&o+a<this.crop.minHeight&&(a=0),this.crop.square){if(t<0&&this.crop.topLeft.x+t<0)return;if(i>0&&this.crop.bottomRight.x+i>this.image.width)return;if(e<0&&this.crop.topLeft.y+e<0)return;if(a>0&&this.crop.bottomRight.y+a>this.image.height)return}this.crop.topLeft.x+=t,this.crop.topLeft.y+=e,this.crop.bottomRight.x+=i,this.crop.bottomRight.y+=a,this.crop.topLeft.x=Math.max(this.crop.topLeft.x,0),this.crop.topLeft.y=Math.max(this.crop.topLeft.y,0),this.crop.bottomRight.x=Math.min(this.crop.bottomRight.x,this.image.width),this.crop.bottomRight.y=Math.min(this.crop.bottomRight.y,this.image.height)},a.prototype.squarifyCrop=function(){var t,e;t=Math.floor(this.crop.bottomRight.x-this.crop.topLeft.x),e=Math.floor(this.crop.bottomRight.y-this.crop.topLeft.y),t!=e&&(e<t?(this.crop.topLeft.x=this.crop.topLeft.x+(t-e)/2,this.crop.bottomRight.x=this.crop.topLeft.x+e):(this.crop.topLeft.y=this.crop.topLeft.y+(e-t)/2,this.crop.bottomRight.y=this.crop.topLeft.y+t))},a.prototype.expandCrop=function(){this.crop.topLeft.x=0,this.crop.topLeft.y=0,this.crop.square?this.image.height>this.image.width?(this.crop.topLeft.y=(this.image.height-this.image.width)/2,this.crop.bottomRight.x=this.image.width,this.crop.bottomRight.y=this.crop.topLeft.y+this.image.width):(this.crop.topLeft.x=(this.image.width-this.image.height)/2,this.crop.bottomRight.x=this.crop.topLeft.x+this.image.height,this.crop.bottomRight.y=this.image.height):(this.crop.bottomRight.x=this.image.width,this.crop.bottomRight.y=this.image.height),this.crop.width()<this.crop.minWidth&&(x=Math.ceil((this.crop.minWidth-this.crop.width())/2),this.crop.topLeft.x=Math.max(0,this.crop.topLeft.x-x),this.crop.bottomRight.x=Math.min(this.image.width,this.crop.bottomRight.x+x)),this.crop.height()<this.crop.minHeight&&(x=Math.ceil((this.crop.minHeight-this.crop.height())/2),this.crop.topLeft.y=Math.max(0,this.crop.topLeft.y-x),this.crop.bottomRight.y=Math.min(this.image.height,this.crop.bottomRight.y+x))},a.prototype.redrawCrop=function(){this.$crop.css("left",this.canvasWrapper.zoom*this.crop.topLeft.x).css("top",this.canvasWrapper.zoom*this.crop.topLeft.y).width(this.canvasWrapper.zoom*(this.crop.bottomRight.x-this.crop.topLeft.x)).height(this.canvasWrapper.zoom*(this.crop.bottomRight.y-this.crop.topLeft.y))},a.prototype.sync=function(t){var e,i,a,s,o,n,r,h,l,c;if("undefined"==typeof t){if(e=document.createElement("canvas"),i=e.getContext("2d"),e.width=this.crop.bottomRight.x-this.crop.topLeft.x,e.height=this.crop.bottomRight.y-this.crop.topLeft.y,i.drawImage(this.image.canvas,this.crop.topLeft.x*-1,this.crop.topLeft.y*-1),(e.width>this.settings.maxWH||e.height>this.settings.maxWH)&&(n=this.settings.maxWH/e.width,r=this.settings.maxWH/e.height,h=Math.min(n,r),l=Math.floor(h*e.width),c=Math.floor(h*e.height),s=document.createElement("canvas"),o=s.getContext("2d"),s.width=l,s.height=c,o.drawImage(e,0,0,l,c),delete e,e=s),"image/png"==this.image.type){for(var p=i.getImageData(0,0,e.width,e.height).data,d=!1,u=0;u<p.length;u+=4)if(p[u+3]<255){d=!0;break}d||(this.image.type="image/jpeg")}if(this.settings.forceType)a=this.settings.forceType;else switch(this.image.type){case"image/svg+xml":a="image/svg+xml";break;case"image/png":case"image/gif":a="image/png";break;default:a="image/jpeg"}t=e.toDataURL(a,75),delete e}i=this.image.canvas.getContext("2d"),i.clearRect(0,0,this.image.canvas.width,this.image.canvas.height),this.$thumbnail.css("background-image","url("+t+")"),this.$dataInput.val(t).trigger("change"),this.$idInput.val(md5(String(Date.now())+t)).trigger("change"),this.$obj.removeClass("new"),this.image.animated=!1,this.image.cropAllowed=!1},a.prototype.showModal=function(){var t=this;this.settings.circle?this.$modal.addClass("circle"):this.$modal.removeClass("circle"),this.$modal.addClass("visible"),window.setTimeout(function(){t.$modal.focus()},250)},a.prototype.hideModal=function(t){t&&this.sync(),this.$modal.removeClass("visible")},a.prototype.modalVisible=function(){return!!this.$modal.hasClass("visible")},a.prototype.rescale=function(){var t=this.$window.width(),e=this.$window.height(),i=t-(this.$modalContent.outerWidth()-this.$modalContent.width()),a=e-(this.$modalContent.outerHeight()-this.$modalContent.height()),s=padHeight=t/1440*100;t<480?s=0:t<736&&(s=20),e<480?padHeight=0:e<736&&(padHeight=20),this.canvasWrapper.width=i-s,this.canvasWrapper.height=a-padHeight,this.image.width<this.canvasWrapper.width&&this.image.height<this.canvasWrapper.height?(this.canvasWrapper.zoom=1,this.canvasWrapper.width=this.image.width,this.canvasWrapper.height=this.image.height):(this.canvasWrapper.zoom=Math.min(this.canvasWrapper.height/this.image.height,this.canvasWrapper.width/this.image.width),this.canvasWrapper.width=this.canvasWrapper.zoom*this.image.width,this.canvasWrapper.height=this.canvasWrapper.zoom*this.image.height),this.$canvasWrapper.width(this.canvasWrapper.width).height(this.canvasWrapper.height),this.$canvas.width(this.canvasWrapper.zoom*this.image.width).height(this.canvasWrapper.zoom*this.image.height),this.redrawCrop()},a.prototype.load=function(t){var e=this;t&&this.getImageProperties(t,function(i){var a;switch(e.image.type=i.type,e.image.size=i.size,e.image.orientation=i.orientation,e.image.animated=i.animated,e.image.type){case"image/svg+xml":if(e.image.cropAllowed=!1,Math.floor(e.image.size/1024)>e.settings.maxSize)return void app.dialog.show({title:"SVG too large",message:"Sorry, SVGs cannot exceed "+e.settings.maxSize/1024+"MB in file size."});break;case"image/jpeg":case"image/png":e.image.cropAllowed=!0;break;case"image/gif":if(e.image.animated&&!e.settings.forceCanvas){if(e.image.cropAllowed=!1,Math.floor(e.image.size/1024)>e.settings.maxSize)return void app.dialog.show({title:"Animated GIF too large",message:"Sorry, animated GIFs cannot exceed "+e.settings.maxSize/1024+"MB in file size."})}else e.image.cropAllowed=!0;break;default:return void app.dialog.show({title:"Invalid image type",message:"Sorry, images must be in either JPEG, PNG, GIF, or SVG format."})}a=e.createObjectURL(t),e.$image.css("width","").css("height","").attr("src","").attr("src",a)})},a.prototype.completeLoad=function(){var t,e,i,a,s,o,n,r,h=this,l=0,c=!1;if(!this.image.cropAllowed&&!this.settings.forceCanvas)return e=this.$image.attr("src"),void(e.match(/^data:/)?this.sync(e):app.toDataURL(e,function(t){h.sync(t)}));switch(this.crop.topLeft.x=this.crop.topLeft.y=null,this.crop.bottomRight.x=this.crop.bottomRight.y=null,this.crop.square=!1,this.$squareOption.hasClass("disabled")||this.$squareOption.removeClass("active"),this.image.orientation){case 1:default:break;case 2:c=!0;break;case 3:l=180;break;case 4:c=!0,l=180;break;case 5:c=!0,l=270;break;case 6:l=90;break;case 7:c=!0,l=90;break;case 8:l=-90}return i=this.$image[0].width,a=this.$image[0].height,(i>this.settings.maxCanvasWH||a>this.settings.maxCanvasWH)&&(o=this.settings.maxCanvasWH/i,n=this.settings.maxCanvasWH/a,r=Math.min(o,n),i=Math.floor(r*i),a=Math.floor(r*a)),t=this.image.canvas.getContext("2d"),l>=360?l-=360:l<0&&(l+=360),0==l||180==Math.abs(l)?(this.image.canvas.width=i,this.image.canvas.height=a,t.translate(this.image.canvas.width/2,this.image.canvas.height/2),t.rotate(l*(Math.PI/180)),t.translate(this.image.canvas.width/-2,this.image.canvas.height/-2)):(this.image.canvas.width=a,this.image.canvas.height=i,t.translate(this.image.canvas.width/2,this.image.canvas.height/2),t.rotate(l*(Math.PI/180)),t.translate(this.image.canvas.height/-2,this.image.canvas.width/-2)),c?(t.scale(-1,1),t.drawImage(this.$image[0],-i,0,i,a)):t.drawImage(this.$image[0],0,0,i,a),this.image.width=this.image.canvas.width,this.image.height=this.image.canvas.height,e=this.$image.attr("src"),e.match(/^blob:/)&&e!=this.$idInput.val()&&this.revokeObjectURL(e),this.$image.attr("src",""),this.settings.crop?((null===this.crop.topLeft.x||isNaN(this.crop.topLeft.x)||null===this.crop.topLeft.y||isNaN(this.crop.topLeft.y)||null===this.crop.bottomRight.x||isNaN(this.crop.bottomRight.x)||null===this.crop.bottomRight.y||isNaN(this.crop.bottomRight.y))&&(this.crop.topLeft.x=this.crop.initialMargin,this.crop.topLeft.y=this.crop.initialMargin,this.crop.square?this.image.height>this.image.width?(this.crop.topLeft.y=(this.image.height-this.image.width)/2,this.crop.bottomRight.x=this.image.width-this.crop.initialMargin,this.crop.bottomRight.y=this.crop.topLeft.y+this.image.width-this.crop.initialMargin):(this.crop.topLeft.x=(this.image.width-this.image.height)/2,this.crop.bottomRight.x=this.crop.topLeft.x+this.image.height-this.crop.initialMargin,this.crop.bottomRight.y=this.image.height-this.crop.initialMargin):(this.crop.bottomRight.x=this.image.width-this.crop.initialMargin,this.crop.bottomRight.y=this.image.height-this.crop.initialMargin),this.crop.width()<this.crop.minWidth&&(s=Math.ceil((this.crop.minWidth-this.crop.width())/2),this.crop.topLeft.x=Math.max(0,this.crop.topLeft.x-s),this.crop.bottomRight.x=Math.min(this.image.width,this.crop.bottomRight.x+s)),this.crop.height()<this.crop.minHeight&&(s=Math.ceil((this.crop.minHeight-this.crop.height())/2),this.crop.topLeft.y=Math.max(0,this.crop.topLeft.y-s),this.crop.bottomRight.y=Math.min(this.image.height,this.crop.bottomRight.y+s))),this.rescale(),this.modalVisible()||this.showModal(),this.image.orientation=null,void((h.settings.forceSquare||h.settings.circle)&&(h.crop.square=!0,h.squarifyCrop(),h.redrawCrop(),this.$squareOption.addClass("active")))):(this.crop.topLeft.x=0,this.crop.topLeft.y=0,this.crop.bottomRight.x=this.image.width,this.crop.bottomRight.y=this.image.height,this.sync(),void(this.image.orientation=null))},a.prototype.cropControl_move=function(t,e){this.moveCrop(t/this.canvasWrapper.zoom,e/this.canvasWrapper.zoom)},a.prototype.cropControl_topLeft=function(t,e){this.crop.square&&(Math.abs(t)>Math.abs(e)?e=t:t=e),this.resizeCrop(t/this.canvasWrapper.zoom,e/this.canvasWrapper.zoom,0,0)},a.prototype.cropControl_topRight=function(t,e){this.crop.square&&(Math.abs(t)>Math.abs(e)?e=t*-1:t=e*-1),this.resizeCrop(0,e/this.canvasWrapper.zoom,t/this.canvasWrapper.zoom,0)},a.prototype.cropControl_bottomRight=function(t,e){this.crop.square&&(Math.abs(t)>Math.abs(e)?e=t:t=e),this.resizeCrop(0,0,t/this.canvasWrapper.zoom,e/this.canvasWrapper.zoom)},a.prototype.cropControl_bottomLeft=function(t,e){this.crop.square&&(Math.abs(t)>Math.abs(e)?e=-1*t:t=-1*e),this.resizeCrop(t/this.canvasWrapper.zoom,0,0,e/this.canvasWrapper.zoom)},a.prototype.getImageProperties_orientation=function(t){var e,i,a,s,o,n,r;if(e=new DataView(t),65496!=e.getUint16(0,!1))return null;for(i=Math.min(e.byteLength,65536),a=2;a<i;)if(s=e.getUint16(a,!1),a+=2,65505==s){if(1165519206!=e.getUint32(a+=2,!1))return null;for(o=18761==e.getUint16(a+=6,!1),a+=e.getUint32(a+4,o),n=e.getUint16(a,o),a+=2,r=0;r<n;r++)if(274==e.getUint16(a+12*r,o))return e.getUint16(a+12*r+8,o)}else{if(65280!=(65280&s))break;a+=e.getUint16(a,!1)}return null},a.prototype.getImageProperties_animated=function(t){var e,i,a,s,o,n,r;if(o=0,e=new DataView(t),s=e.byteLength,71!==e.getUint8(0)||73!==e.getUint8(1)||70!==e.getUint8(2)||56!==e.getUint8(3))return!1;for(i=0,a=s-3;i<a&&o<2;++i)0==e.getUint8(i)&&33===e.getUint8(i+1)&&249===e.getUint8(i+2)&&(n=e.getUint8(i+3),r=i+4+n,r+1<s&&0===e.getUint8(r)&&(44===e.getUint8(r+1)||e.getUint8(r+1===33))&&o++);return o>1},a.prototype.getImageProperties=function(t,e){var i=this,a=new FileReader;a.onload=function(a){var s={};s.type=t.type,s.size=t.size,s.orientation=i.getImageProperties_orientation(a.target.result),s.animated=i.getImageProperties_animated(a.target.result),e(s)},a.readAsArrayBuffer(t)},$.fn.formImageUploader=function(){var t=$(this);if(0==this.length)return t;if(this.length>1){for(var e=0;e<this.length;e++)$(this[e]).formImageUploader();return t}return"_formImageUploader"in this[0]||(this[0]._formImageUploader=new a(t)),t},"undefined"!=typeof e&&(e.exports=a)},{}],formVideoUploader:[function(t,e,i){function a(t){var e,i=this;this.inputPrefix="",this.video={width:0,height:0,type:null,size:0},this.settings={maxSize:2048},this.$window=$(window),this.$obj=t.addClass("form-video-uploader"),"undefined"!=typeof(e=this.$obj.attr("data-maxSize"))&&(this.settings.maxSize=parseInt(e)),this.$idInput=this.$obj.find(".id").css("position","absolute").css("width","0px").css("height","0px").css("visibility","hidden").css("z-index","-1").css("overflow","hidden").css("-moz-pointer-events","none").css("-webkit-pointer-events","none").css("-ms-pointer-events","none").css("pointer-events","none").on("--refresh-video",function(){var t,e;t=i.$dataInput.val(),e=i.$idInput.val(),t&&e?(i.$thumbnail_video.attr("src",t),i.$obj.removeClass("new")):(i.$thumbnail_video.attr("src",""),i.$obj.addClass("new"))}),this.$dataInput=this.$obj.find(".data").css("display","none"),this.$thumbnail=$('<div class="thumbnail"></div>').appendTo(this.$obj).css("background-size","cover").css("background-position","center").on("click",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||i.$fileInput.trigger("click")}),this.$thumbnail_img=$("<img />").appendTo(this.$thumbnail),this.$thumbnail_canvas=document.createElement("canvas"),this.$thumbnail_context=this.$thumbnail_canvas.getContext("2d"),this.$thumbnail_video=$('<video src="" autoplay muted />').on("loadeddata",function(){var t,e,a,s;t=i.$thumbnail_canvas,e=i.$thumbnail_context,a=i.$thumbnail_video[0],t.width=a.videoWidth,t.height=a.videoHeight,setTimeout(function(){e.drawImage(a,0,0),s=t.toDataURL("image/jpeg",75),i.$thumbnail_img.attr("src",s),e.clearRect(0,0,t.width,t.height)},"ie"==skel.vars.browser||"edge"==skel.vars.browser?100:0)}),this.$obj.on("click",".do-upload",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||i.$fileInput.trigger("click")}),this.$obj.on("click",".do-clear",function(t){t.preventDefault(),t.stopPropagation(),i.$idInput.prop("disabled")||(url=i.$video.attr("src"),url&&url.match(/^blob:/)&&url!=i.$idInput.val()&&i.revokeObjectURL(url),i.$video.attr("src",""),i.$thumbnail_video.attr("src",""),i.$dataInput.val("").trigger("change"),i.$idInput.val("").trigger("change"),i.$obj.addClass("new"))}),this.$video=$("<video />").on("loadeddata",function(){i.completeLoad()}),this.$fileInput=$('<input type="file" name="video" autocomplete="off" accept="video/mp4" />').on("change",function(){i.load(i.$fileInput.prop("files")[0]),i.$fileInput.val("")}),this.$idInput.triggerHandler("--refresh-video")}a.prototype.createObjectURL=function(t){var e;return e="undefined"!=typeof window.webkitURL?window.webkitURL.createObjectURL(t):"undefined"!=typeof window.URL?window.URL.createObjectURL(t):null},a.prototype.revokeObjectURL=function(t){"undefined"!=typeof window.webkitURL?window.webkitURL.revokeObjectURL(t):"undefined"!=typeof window.URL&&window.URL.revokeObjectURL(t)},a.prototype.sync=function(t){this.$thumbnail_video.attr("src",t),this.$dataInput.val(t).trigger("change"),this.$idInput.val(md5(String(Date.now())+t)).trigger("change"),this.$obj.removeClass("new")},a.prototype.load=function(t){var e=this;t&&this.getVideoProperties(t,function(i){var a;switch(e.video.type=i.type,e.video.size=i.size,e.video.width=0,e.video.height=0,e.video.type){case"video/mp4":case"video/x-m4v":if(Math.floor(e.video.size/1024)>e.settings.maxSize)return void app.dialog.show({title:"Video too large",message:"Sorry, videos cannot exceed "+e.settings.maxSize/1024+"MB in file size."});break;default:return void app.dialog.show({title:"Invalid video type",message:"Sorry, videos must be in MP4 format."})}a=e.createObjectURL(t),e.$video.attr("src","").attr("src",a)})},a.prototype.completeLoad=function(){var t,e=this;t=this.$video.attr("src"),this.video.width=this.$video[0].videoWidth,this.video.height=this.$video[0].videoHeight,t.match(/^data:/)?e.sync(t):app.toDataURL(t,function(t){e.sync(t)})},a.prototype.getVideoProperties=function(t,e){var i=new FileReader;i.onload=function(i){var a={};a.type=t.type,a.size=t.size,e(a)},i.readAsArrayBuffer(t)},$.fn.formVideoUploader=function(){var t=$(this);if(0==this.length)return t;if(this.length>1){for(var e=0;e<this.length;e++)$(this[e]).formVideoUploader();return t}return"_formVideoUploader"in this[0]||(this[0]._formVideoUploader=new a(t)),t},"undefined"!=typeof e&&(e.exports=a)},{}],form:[function(t,e,i){function a(t,e){var i=this;if(this.$obj=t,this.options=$.extend({fields:{},types:{},verify:{},preSubmitHandler:null,submitHandler:function(t){i.submitHandler(t)},validation:!!t.is("[data-validation]")},e),this.$alert=$('<div class="alert">what what</div>').prependTo(this.$obj).hide(),this.alertTimers=[],"ie"!=skel.vars.browser&&"edge"!=skel.vars.browser&&this.$obj.on("input",'input[type="range"]',function(){$(this).trigger("change")}),this.$obj.on("click","label",function(t){var e=$(this).prev().attr("type");"checkbox"!=e&&"radio"!=e&&t.preventDefault()}),("ie"==skel.vars.browser||"edge"==skel.vars.browser)&&this.$obj.attr("id")){var i=this;$('input[form="'+this.$obj.attr("id")+'"]').on("click",function(t){t.preventDefault(),t.stopPropagation(),i.$obj.trigger("submit")})}this.initType_Group(),this.initType_Image(),this.initType_Video(),this.initType_Color(),this.initModifiers(),this.initRequires(),this.initFields(),this.init()}t("./formColor.js"),t("./formGroup.js"),t("./formImageUploader.js"),t("./formVideoUploader.js");a.prototype.statusTables={"font-weight":{100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Heavy"}},a.prototype.option=function(t,e){return t in this.options?("undefined"!=typeof e&&(this.options[t]=e),this.options[t]):null},a.prototype.value=function(t,e){var i=this.$obj.find("#"==t.charAt(0)?'input[id="'+t.substr(1)+'"],select[id="'+t.substr(1)+'"]':'input[name="'+t+'"],select[name="'+t+'"]');return 0==i.length||i.prop("disabled")===!0?null:("undefined"!=typeof e&&i.val(e),i.val())},a.prototype.showAlert=function(t,e){var i=this,a=25*e.length;this.clearAlert(),i.$alert.addClass(t).text(e),i.alertTimers.push(window.setTimeout(function(){i.$alert.show(),web.scrollTo(i.$alert),i.alertTimers.push(window.setTimeout(function(){i.$alert.addClass("visible")},100)),i.alertTimers.push(window.setTimeout(function(){i.$alert.removeClass("visible")},2e3+a)),i.alertTimers.push(window.setTimeout(function(){i.clearAlert()},2250+a))},0))},a.prototype.clearAlert=function(){for(var t in this.alertTimers)window.clearTimeout(this.alertTimers[t]);this.alertTimers=[],this.$alert.hide().text("").removeClass("visible").removeClass("error").removeClass("success")},a.prototype.flag=function(t,e,i){i?t.attr("data-"+e,"1").data(e,"1"):t.removeAttr("data-"+e).removeData(e)},a.prototype.is=function(t,e){return t in this.options.types?this.options.types[t](e):web.is(t,e)},a.prototype.isValid=function(){return 0===this.$obj.find("[data-invalid]:enabled,[data-missing]:enabled,[data-unverified]:enabled").length},a.prototype.submitHandler=function(t){var e,i=this,a=this.$obj.data("action");a&&"#"!=a&&(e=function(){$.ajax({type:"POST",url:a+(a.indexOf("?")==-1?"?":"&")+"ajax=1",data:i.$obj.serialize(),dataType:"json",success:function(e){switch(e.action){case"alert":i.showAlert(e.type,e.message);break;case"redirect":return"dashboardAlert"in e&&"dashboard"in app&&app.dashboard.setAlert(e.dashboardAlert),void window.location.replace(e.url);default:i.showAlert("success","Ok.")}if(i.$obj.find('input[name="'+e._key+'"]').val(e[e._key]),t(),e.reset){if(e.reset===!0)i.$obj.get(0).reset();else if($.isArray(e.reset))for(k in e.reset)i.$obj.find('input[name="'+e.reset[k]+'"],select[name="'+e.reset[k]+'"]').val("").removeProp("checked");else i.$obj.find('input[name="'+e.reset+'"],select[name="'+e.reset+'"]').val("").removeProp("checked");i.$obj.find("input, select, textarea").trigger("change")}e.focus&&i.$obj.find('input[name="'+e.focus+'"]').focus(),e.callback&&window[e.callback]()}})},window.setTimeout(function(){i.options.preSubmitHandler?i.options.preSubmitHandler.apply(i,[e]):e()},250))},a.prototype.validate=function(t){var e=t.data("type"),i=1==t.data("optional")||t.prop("disabled")===!0,a=t.val();"checkbox"==t.attr("type")&&(a=t.prop("checked")?"on":""),e||(e="any"),""==a?(this.flag(t,"invalid",!1),this.flag(t,"missing",!i)):(this.flag(t,"missing",!1),this.flag(t,"invalid",!this.is(e,a))),this.isValid()?this.enableSubmits():this.disableSubmits()},a.prototype.$submits=function(){return $('input[form="'+this.$obj.attr("id")+'"]').add(this.$obj.find('input[type="submit"]'))},a.prototype.enableSubmits=function(){var t=this.$submits();t.prop("disabled",!1),t.removeClass("is-submitting")},a.prototype.disableSubmits=function(t){var e=this.$submits();e.prop("disabled",!0),t&&e.addClass("is-submitting")},a.prototype.initFields=function(){var t,e,i;for(t in this.options.fields)e=this.options.fields[t],i=this.$obj.find('[name="'+t+'"]'),"value"in e&&i.val(e.value)},a.prototype.initType_Group=function(){
this.$obj.find(".group").formGroup(this)},a.prototype.initRequires=function(t,e){var i=t?t:this.$obj,a=e?e:this.$obj;i.find("[data-requires]").each(function(){var t,e,i,s,o,n,r,h,l,c=$(this),p=c.data("requires").split("&"),d=c.find("input,select,textarea").not("[data-requires-ignore]"),u=[];t=function(){var t,e=!0;for(t in u)e=u[t].fTest()&&e;e?(d.not("[data-requires-ignore]").prop("disabled",!1).trigger("change"),c.removeClass("inactive"),c.is(":last-child")&&c.prev().removeClass("before-inactive-last-child")):(d.not("[data-requires-ignore]").prop("disabled",!0).trigger("change"),c.addClass("inactive"),c.is(":last-child")&&c.prev().addClass("before-inactive-last-child"))};for(l in p){switch(h=p[l].split("="),r=!1,e=h[0],"!"==e.substr(-1)&&(e=e.substr(0,e.length-1),r=!0),i=h[1].split(","),1==i.length&&(i=[i]),s=a.find('[name="'+e+'"]').on("change",t),s.attr("type")){case"radio":o=function(){return this.$input.filter(":checked").val()};break;case"checkbox":o=function(){return this.$input.prop("checked")?"on":"off"};break;default:o=function(){return this.$input.val()}}n=function(){var t,e=this.fValue();if(this.invert){for(t in this.value)if(e==this.value[t])return!1;return!0}for(t in this.value)if(e==this.value[t])return!0;return!1},u.push({key:e,value:i,$input:s,fValue:o,fTest:n,invert:r})}t()})},a.prototype.initModifiers=function(t){var e=t?t:this.$obj,i=this;e.find('input[type="range"][data-status]').each(function(){var t,e,a,s,o=$(this),n=$('<div class="status" />').insertAfter(o),r=o.data("status"),h=o.data("status-args");if(h){for(t=h.split("&"),a={},s=0;s<t.length;s++)e=t[s].split("="),a[e[0].toString()]=e[1];h=a}else h={};o.on("change.status",function(t){var e=o.val();switch(r){case"rename":e.toString()in h&&(e=h[e.toString()]);break;case"seconds":e=parseFloat(e)/1e3+"s";break;case"degrees":e+="&deg;";break;case"font-weight":e in i.statusTables["font-weight"]&&(e=i.statusTables["font-weight"][e])}n.html(e)}).triggerHandler("change.status")}),e.find("textarea[data-autosize]").each(function(){var t=$(this),e=t.parent(),a=1==t.filter("[data-autosize-newline]").length;t.attr("rows","1").css("overflow","hidden").css("resize","none").on("keydown",a?function(e){13==e.keyCode&&(e.ctrlKey?(e.preventDefault(),i.$submits().prop("disabled")||0!=t.parents(".group").length||i.$obj.trigger("submit")):e.stopPropagation())}:function(e){13==e.keyCode&&(e.preventDefault(),i.$submits().prop("disabled")||0!=t.parents(".group").length||i.$obj.trigger("submit"))}).on("--refresh-input",function(i){var a=!1,s=function(){var e,i;return e=t.prop("scrollHeight")-4,isNaN(i=parseInt(t.data("autosizeLimit")))||(e>i&&(a=!0),e=Math.min(i,e)),e+"px"};e.css("min-height",s()),t.css("height","auto").css("height",s()),a?t.css("overflow-y","scroll").attr("data-autosize-limited","1"):t.css("overflow-y","hidden").removeAttr("data-autosize-limited"),window.setTimeout(function(){t.css("height",s()),e.css("min-height",s())},100)}).on("input blur focus change",function(e){t.triggerHandler("--refresh-input"),i.$obj.triggerHandler("--refresh-autosize")}).on("keydown",function(e){9==e.keyCode&&t.select()}).triggerHandler("--refresh-input")})},a.prototype.initType_Color=function(t){var e=t?t:this.$obj;e.find('input[type="hexcolor"]').formColor()},a.prototype.initType_Image=function(t){var e=t?t:this.$obj;e.find(".form-image-uploader").formImageUploader()},a.prototype.initType_Video=function(t){var e=t?t:this.$obj;e.find(".form-video-uploader").formVideoUploader()},a.prototype.init=function(){var t=this;if(this.options.validation&&this.$obj.on("change blur keyup","input,select,textarea",function(){t.validate($(this))}),!$.isEmptyObject(this.options.verify)){this.$obj.on("--refresh-verify",function(e){t.$obj.find("input,select,textarea").each(function(){var e=$(this),i=e.attr("name"),a=e.val();i in t.options.verify&&e.prop("disabled")!==!0&&(""==a?t.flag(e,"unverified",!0):e.data("verify-originalValue",a))})}),this.$obj.on("keydown","input,select,textarea",function(e){var i=$(this),a=i.attr("name");a in t.options.verify&&i.prop("disabled")!==!0&&13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),i.blur())}).on("input","input,select,textarea",function(e){var i=$(this),a=i.next(".message"),s=i.attr("name"),o=i.val();s in t.options.verify&&i.prop("disabled")!==!0&&(t.flag(i,"unverified",!0),t.flag(i,"verifailed",!1),a.text("").removeClass("positive").removeClass("negative").removeClass("visible"),t.$obj.parent().trigger("--refresh-scrollbar"),"_form_verifyTimeout"in this&&window.clearTimeout(this._form_verifyTimeout),this._form_verifyTimeout=window.setTimeout(function(){if("1"!=i.data("invalid")&&""!=o&&(o=i.val(),"1"!=i.data("invalid")&&""!=o)){if(o==i.data("verify-originalValue"))return t.flag(i,"unverified",!1),void t.validate(i);a.text("Checking ...").addClass("visible"),t.$obj.parent().trigger("--refresh-scrollbar"),t.options.verify[s](o,function(e,s){t.flag(i,"unverified",!e),t.validate(i),e===!1&&t.flag(i,"verifailed",!0),i.is(":focus")||i.trigger("change"),a.addClass(e?"positive":"negative").text(s)})}},500))});var e,i;for(e in this.options.verify)i=this.$obj.find('input[name="'+e+'"]'),0!=i.length&&$('<div class="message"></div>').insertAfter(i);this.$obj.triggerHandler("--refresh-verify")}this.$obj.attr("action")&&this.$obj.data("action",this.$obj.attr("action")).removeAttr("action"),this.$obj.on("change","input,select,textarea",function(){var e=$(this),i=e.attr("name");"name"in t.options.fields&&"change"in t.options.fields[i]&&t.options.fields[i].change(e.data("missing")||e.data("invalid")||e.data("unverified")?"":e.val())}),this.$obj.on("submit",function(e){var i=t.$obj.find("input,select,textarea");t.options.validation&&(i.each(function(){t.validate($(this))}),t.isValid()||(e.stopPropagation(),e.preventDefault())),t.options.submitHandler&&(e.stopPropagation(),e.preventDefault(),i.blur(),t.disableSubmits(!0),i.filter(":disabled").removeData("verify-originalValue"),t.clearAlert(),t.options.submitHandler(function(){t.enableSubmits()}))}),this.options.validation&&window.setTimeout(function(){t.$obj.find("input,select,textarea").each(function(){t.validate($(this))})},0)},$.fn.form=function(t){var e=$(this);if(0==this.length)return e;if(this.length>1){for(var i=0;i<this.length;i++)$(this[i]).form(t);return e}return this[0]._form=new a(e,t),e},e.exports=a},{"./formColor.js":"formColor","./formGroup.js":"formGroup","./formImageUploader.js":"formImageUploader","./formVideoUploader.js":"formVideoUploader"}],tabs:[function(t,e,i){function a(t,e){var i=this,a=$('<ul class="tabs'+(e?" depth-"+e:"")+'"></ul>').prependTo(t);"undefined"==typeof e&&(e=0),this.tabs=[],this.$tabs=$(),this.$panes=$(),t.children("section[data-title]").each(function(t){var s={$tab:null,$pane:null,title:null};s.$pane=$(this),s.$pane.hide(),i.$panes=i.$panes.add(s.$pane),s.$pane.children("section[data-title]").length>0&&s.$pane.tabs(e+1),s.title=s.$pane.data("title"),s.$tab=$("<li>"+s.title+"</li>").appendTo(a),s.$tab.on("click",function(){i.switch(t)}),i.$tabs=i.$tabs.add(s.$tab),i.tabs.push(s)}),this.switch(0)}a.prototype.switch=function(t){var e=this.tabs[t];this.$tabs.removeClass("active"),this.$panes.hide(),e.$tab.addClass("active"),e.$pane.show(),e.$pane.find("input,select,textarea").triggerHandler("--refresh-input")},$.fn.tabs=function(t){var e=$(this);if(0==this.length)return e;if(this.length>1){for(var i=0;i<this.length;i++)$(this[i]).tabs(t);return e}return this[0]._tabs=new a(e,t),e},e.exports=a},{}]},{},[1]);